{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"/Users/aqchen/go/src/github.com/alanqchen/Bear-Post/frontend/pages/[year]/[month]/[slug]/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nexport default function Index(_ref) {\n  var post = _ref.post;\n\n  if (!post.success) {\n    return __jsx(Error, {\n      statusCode: 404,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 6\n      },\n      __self: this\n    });\n  }\n\n  var router = useRouter();\n  var slug = router.asPath; // remove \"/\"\n\n  slug = slug.substr(1);\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, \"Goto Index\")), __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }, post.title), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }, \"This is a post!\"));\n}\n\nIndex.getInitialProps = function _callee(_ref2) {\n  var r, query, res, post;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          r = _ref2.r, query = _ref2.query;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(fetch(\"http://localhost:8080/api/v1/posts\".concat(ctx.asPath)));\n\n        case 3:\n          res = _context.sent;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(res.json());\n\n        case 6:\n          post = _context.sent;\n\n          if (post.error && r) {\n            res.statusCode = 404;\n          }\n\n          console.log(\"Show data fetched. Count: \".concat(post.data.id));\n          return _context.abrupt(\"return\", post);\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};","map":{"version":3,"sources":["/Users/aqchen/go/src/github.com/alanqchen/Bear-Post/frontend/pages/[year]/[month]/[slug]/index.js"],"names":["Link","useRouter","Index","post","success","router","slug","asPath","substr","title","getInitialProps","r","query","fetch","ctx","res","json","error","statusCode","console","log","data","id"],"mappings":";;;;AAAA,OAAOA,IAAP,MAAiB,WAAjB;AACA,SAASC,SAAT,QAA0B,aAA1B;AAEA,eAAe,SAASC,KAAT,OAAyB;AAAA,MAARC,IAAQ,QAARA,IAAQ;;AACtC,MAAI,CAACA,IAAI,CAACC,OAAV,EAAmB;AACjB,WAAO,MAAC,KAAD;AAAO,MAAA,UAAU,EAAE,GAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AACD,MAAMC,MAAM,GAAGJ,SAAS,EAAxB;AACA,MAAIK,IAAI,GAAGD,MAAM,CAACE,MAAlB,CALsC,CAMtC;;AACAD,EAAAA,IAAI,GAAGA,IAAI,CAACE,MAAL,CAAY,CAAZ,CAAP;AACA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAf,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKL,IAAI,CAACM,KAAV,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAHF,CADF;AAOD;;AAEDP,KAAK,CAACQ,eAAN,GAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,UAAAA,CAAT,SAASA,CAAT,EAAYC,KAAZ,SAAYA,KAAZ;AAAA;AAAA,2CAEPC,KAAK,6CAAsCC,GAAG,CAACP,MAA1C,EAFE;;AAAA;AAEnBQ,UAAAA,GAFmB;AAAA;AAAA,2CAGJA,GAAG,CAACC,IAAJ,EAHI;;AAAA;AAGjBb,UAAAA,IAHiB;;AAKvB,cAAIA,IAAI,CAACc,KAAL,IAAcN,CAAlB,EAAqB;AACnBI,YAAAA,GAAG,CAACG,UAAJ,GAAiB,GAAjB;AACD;;AAEDC,UAAAA,OAAO,CAACC,GAAR,qCAAyCjB,IAAI,CAACkB,IAAL,CAAUC,EAAnD;AATuB,2CAWhBnB,IAXgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAzB","sourcesContent":["import Link from 'next/link';\nimport { useRouter } from 'next/router';\n\nexport default function Index({ post }) {\n  if (!post.success) {\n    return <Error statusCode={404} />;\n  }\n  const router = useRouter();\n  let slug = router.asPath;\n  // remove \"/\"\n  slug = slug.substr(1);\n  return (\n    <div>\n      <Link href=\"/\"><a>Goto Index</a></Link>\n      <h1>{post.title}</h1>\n      <p>This is a post!</p>\n    </div>\n  );\n}\n\nIndex.getInitialProps  = async ({ r, query }) => {\n\n  let res = await fetch(`http://localhost:8080/api/v1/posts${ctx.asPath}`);\n  const post = await res.json();\n\n  if (post.error && r) {\n    res.statusCode = 404;\n  }\n\n  console.log(`Show data fetched. Count: ${post.data.id}`);\n\n  return post;\n};\n"]},"metadata":{},"sourceType":"module"}