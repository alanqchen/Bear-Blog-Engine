{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _Menu = _interopRequireDefault(require(\"./Menu\"));\n\nvar _MenuItem = _interopRequireDefault(require(\"./MenuItem\"));\n\nvar _ClickableComponent = _interopRequireDefault(require(\"../ClickableComponent\"));\n\nvar propTypes = {\n  inline: _propTypes[\"default\"].bool,\n  items: _propTypes[\"default\"].array,\n  className: _propTypes[\"default\"].string,\n  onSelectItem: _propTypes[\"default\"].func,\n  children: _propTypes[\"default\"].any,\n  selectedIndex: _propTypes[\"default\"].number\n};\n\nvar MenuButton =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(MenuButton, _Component);\n\n  function MenuButton(props, context) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, MenuButton);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(MenuButton).call(this, props, context));\n    _this.state = {\n      active: false,\n      activateIndex: props.selectedIndex || 0\n    };\n    _this.commitSelection = _this.commitSelection.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.activateMenuItem = _this.activateMenuItem.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleClick = _this.handleClick.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.renderMenu = _this.renderMenu.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleFocus = _this.handleFocus.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleBlur = _this.handleBlur.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleUpArrow = _this.handleUpArrow.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleDownArrow = _this.handleDownArrow.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleEscape = _this.handleEscape.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleReturn = _this.handleReturn.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleTab = _this.handleTab.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyPress = _this.handleKeyPress.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleSelectItem = _this.handleSelectItem.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleIndexChange = _this.handleIndexChange.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(MenuButton, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.selectedIndex !== this.props.selectedIndex) {\n        this.activateMenuItem(this.props.selectedIndex);\n      }\n    }\n  }, {\n    key: \"commitSelection\",\n    value: function commitSelection(index) {\n      this.setState({\n        activateIndex: index\n      });\n      this.handleIndexChange(index);\n    }\n  }, {\n    key: \"activateMenuItem\",\n    value: function activateMenuItem(index) {\n      this.setState({\n        activateIndex: index\n      });\n      this.handleIndexChange(index);\n    }\n  }, {\n    key: \"handleIndexChange\",\n    value: function handleIndexChange(index) {\n      var onSelectItem = this.props.onSelectItem;\n      onSelectItem(index);\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick() {\n      this.setState(function (prevState) {\n        return {\n          active: !prevState.active\n        };\n      });\n    }\n  }, {\n    key: \"handleFocus\",\n    value: function handleFocus() {\n      document.addEventListener('keydown', this.handleKeyPress);\n    }\n  }, {\n    key: \"handleBlur\",\n    value: function handleBlur() {\n      this.setState({\n        active: false\n      });\n      document.removeEventListener('keydown', this.handleKeyPress);\n    }\n  }, {\n    key: \"handleUpArrow\",\n    value: function handleUpArrow(e) {\n      var items = this.props.items;\n\n      if (this.state.active) {\n        e.preventDefault();\n        var newIndex = this.state.activateIndex - 1;\n\n        if (newIndex < 0) {\n          newIndex = items.length ? items.length - 1 : 0;\n        }\n\n        this.activateMenuItem(newIndex);\n      }\n    }\n  }, {\n    key: \"handleDownArrow\",\n    value: function handleDownArrow(e) {\n      var items = this.props.items;\n\n      if (this.state.active) {\n        e.preventDefault();\n        var newIndex = this.state.activateIndex + 1;\n\n        if (newIndex >= items.length) {\n          newIndex = 0;\n        }\n\n        this.activateMenuItem(newIndex);\n      }\n    }\n  }, {\n    key: \"handleTab\",\n    value: function handleTab(e) {\n      if (this.state.active) {\n        e.preventDefault();\n        this.commitSelection(this.state.activateIndex);\n      }\n    }\n  }, {\n    key: \"handleReturn\",\n    value: function handleReturn(e) {\n      e.preventDefault();\n\n      if (this.state.active) {\n        this.commitSelection(this.state.activateIndex);\n      } else {\n        this.setState({\n          active: true\n        });\n      }\n    }\n  }, {\n    key: \"handleEscape\",\n    value: function handleEscape() {\n      this.setState({\n        active: false,\n        activateIndex: 0\n      });\n    }\n  }, {\n    key: \"handleKeyPress\",\n    value: function handleKeyPress(event) {\n      // Escape (27) key\n      if (event.which === 27) {\n        this.handleEscape(event);\n      } else if (event.which === 9) {\n        // Tab (9) key\n        this.handleTab(event);\n      } else if (event.which === 13) {\n        // Enter (13) key\n        this.handleReturn(event);\n      } else if (event.which === 38) {\n        // Up (38) key\n        this.handleUpArrow(event);\n      } else if (event.which === 40) {\n        // Down (40) key press\n        this.handleDownArrow(event);\n      }\n    }\n  }, {\n    key: \"handleSelectItem\",\n    value: function handleSelectItem(i) {\n      this.commitSelection(i);\n    }\n  }, {\n    key: \"renderMenu\",\n    value: function renderMenu() {\n      var _this2 = this;\n\n      if (!this.state.active) {\n        return null;\n      }\n\n      var items = this.props.items;\n      return _react[\"default\"].createElement(_Menu[\"default\"], null, items.map(function (item, i) {\n        return _react[\"default\"].createElement(_MenuItem[\"default\"], {\n          item: item,\n          index: i,\n          onSelectItem: _this2.handleSelectItem,\n          activateIndex: _this2.state.activateIndex,\n          key: \"item-\".concat(i++)\n        });\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          inline = _this$props.inline,\n          className = _this$props.className;\n      return _react[\"default\"].createElement(_ClickableComponent[\"default\"], {\n        className: (0, _classnames[\"default\"])(className, {\n          'video-react-menu-button-inline': !!inline,\n          'video-react-menu-button-popup': !inline,\n          'video-react-menu-button-active': this.state.active\n        }, 'video-react-control video-react-button video-react-menu-button'),\n        role: \"button\",\n        tabIndex: \"0\",\n        ref: function ref(c) {\n          _this3.menuButton = c;\n        },\n        onClick: this.handleClick,\n        onFocus: this.handleFocus,\n        onBlur: this.handleBlur\n      }, this.props.children, this.renderMenu());\n    }\n  }]);\n  return MenuButton;\n}(_react.Component);\n\nexports[\"default\"] = MenuButton;\nMenuButton.propTypes = propTypes;\nMenuButton.displayName = 'MenuButton';","map":{"version":3,"sources":["/Users/aqchen/go/src/github.com/alanqchen/Bear-Post/frontend/node_modules/video-react/lib/components/menu/MenuButton.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_assertThisInitialized2","_inherits2","_propTypes","_react","_classnames","_Menu","_MenuItem","_ClickableComponent","propTypes","inline","bool","items","array","className","string","onSelectItem","func","children","any","selectedIndex","number","MenuButton","_Component","props","context","_this","call","state","active","activateIndex","commitSelection","bind","activateMenuItem","handleClick","renderMenu","handleFocus","handleBlur","handleUpArrow","handleDownArrow","handleEscape","handleReturn","handleTab","handleKeyPress","handleSelectItem","handleIndexChange","key","componentDidUpdate","prevProps","index","setState","prevState","document","addEventListener","removeEventListener","e","preventDefault","newIndex","length","event","which","i","_this2","createElement","map","item","concat","render","_this3","_this$props","role","tabIndex","ref","c","menuButton","onClick","onFocus","onBlur","Component","displayName"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _Menu = _interopRequireDefault(require(\"./Menu\"));\n\nvar _MenuItem = _interopRequireDefault(require(\"./MenuItem\"));\n\nvar _ClickableComponent = _interopRequireDefault(require(\"../ClickableComponent\"));\n\nvar propTypes = {\n  inline: _propTypes[\"default\"].bool,\n  items: _propTypes[\"default\"].array,\n  className: _propTypes[\"default\"].string,\n  onSelectItem: _propTypes[\"default\"].func,\n  children: _propTypes[\"default\"].any,\n  selectedIndex: _propTypes[\"default\"].number\n};\n\nvar MenuButton =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(MenuButton, _Component);\n\n  function MenuButton(props, context) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, MenuButton);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(MenuButton).call(this, props, context));\n    _this.state = {\n      active: false,\n      activateIndex: props.selectedIndex || 0\n    };\n    _this.commitSelection = _this.commitSelection.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.activateMenuItem = _this.activateMenuItem.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleClick = _this.handleClick.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.renderMenu = _this.renderMenu.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleFocus = _this.handleFocus.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleBlur = _this.handleBlur.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleUpArrow = _this.handleUpArrow.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleDownArrow = _this.handleDownArrow.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleEscape = _this.handleEscape.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleReturn = _this.handleReturn.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleTab = _this.handleTab.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleKeyPress = _this.handleKeyPress.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleSelectItem = _this.handleSelectItem.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleIndexChange = _this.handleIndexChange.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(MenuButton, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.selectedIndex !== this.props.selectedIndex) {\n        this.activateMenuItem(this.props.selectedIndex);\n      }\n    }\n  }, {\n    key: \"commitSelection\",\n    value: function commitSelection(index) {\n      this.setState({\n        activateIndex: index\n      });\n      this.handleIndexChange(index);\n    }\n  }, {\n    key: \"activateMenuItem\",\n    value: function activateMenuItem(index) {\n      this.setState({\n        activateIndex: index\n      });\n      this.handleIndexChange(index);\n    }\n  }, {\n    key: \"handleIndexChange\",\n    value: function handleIndexChange(index) {\n      var onSelectItem = this.props.onSelectItem;\n      onSelectItem(index);\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick() {\n      this.setState(function (prevState) {\n        return {\n          active: !prevState.active\n        };\n      });\n    }\n  }, {\n    key: \"handleFocus\",\n    value: function handleFocus() {\n      document.addEventListener('keydown', this.handleKeyPress);\n    }\n  }, {\n    key: \"handleBlur\",\n    value: function handleBlur() {\n      this.setState({\n        active: false\n      });\n      document.removeEventListener('keydown', this.handleKeyPress);\n    }\n  }, {\n    key: \"handleUpArrow\",\n    value: function handleUpArrow(e) {\n      var items = this.props.items;\n\n      if (this.state.active) {\n        e.preventDefault();\n        var newIndex = this.state.activateIndex - 1;\n\n        if (newIndex < 0) {\n          newIndex = items.length ? items.length - 1 : 0;\n        }\n\n        this.activateMenuItem(newIndex);\n      }\n    }\n  }, {\n    key: \"handleDownArrow\",\n    value: function handleDownArrow(e) {\n      var items = this.props.items;\n\n      if (this.state.active) {\n        e.preventDefault();\n        var newIndex = this.state.activateIndex + 1;\n\n        if (newIndex >= items.length) {\n          newIndex = 0;\n        }\n\n        this.activateMenuItem(newIndex);\n      }\n    }\n  }, {\n    key: \"handleTab\",\n    value: function handleTab(e) {\n      if (this.state.active) {\n        e.preventDefault();\n        this.commitSelection(this.state.activateIndex);\n      }\n    }\n  }, {\n    key: \"handleReturn\",\n    value: function handleReturn(e) {\n      e.preventDefault();\n\n      if (this.state.active) {\n        this.commitSelection(this.state.activateIndex);\n      } else {\n        this.setState({\n          active: true\n        });\n      }\n    }\n  }, {\n    key: \"handleEscape\",\n    value: function handleEscape() {\n      this.setState({\n        active: false,\n        activateIndex: 0\n      });\n    }\n  }, {\n    key: \"handleKeyPress\",\n    value: function handleKeyPress(event) {\n      // Escape (27) key\n      if (event.which === 27) {\n        this.handleEscape(event);\n      } else if (event.which === 9) {\n        // Tab (9) key\n        this.handleTab(event);\n      } else if (event.which === 13) {\n        // Enter (13) key\n        this.handleReturn(event);\n      } else if (event.which === 38) {\n        // Up (38) key\n        this.handleUpArrow(event);\n      } else if (event.which === 40) {\n        // Down (40) key press\n        this.handleDownArrow(event);\n      }\n    }\n  }, {\n    key: \"handleSelectItem\",\n    value: function handleSelectItem(i) {\n      this.commitSelection(i);\n    }\n  }, {\n    key: \"renderMenu\",\n    value: function renderMenu() {\n      var _this2 = this;\n\n      if (!this.state.active) {\n        return null;\n      }\n\n      var items = this.props.items;\n      return _react[\"default\"].createElement(_Menu[\"default\"], null, items.map(function (item, i) {\n        return _react[\"default\"].createElement(_MenuItem[\"default\"], {\n          item: item,\n          index: i,\n          onSelectItem: _this2.handleSelectItem,\n          activateIndex: _this2.state.activateIndex,\n          key: \"item-\".concat(i++)\n        });\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          inline = _this$props.inline,\n          className = _this$props.className;\n      return _react[\"default\"].createElement(_ClickableComponent[\"default\"], {\n        className: (0, _classnames[\"default\"])(className, {\n          'video-react-menu-button-inline': !!inline,\n          'video-react-menu-button-popup': !inline,\n          'video-react-menu-button-active': this.state.active\n        }, 'video-react-control video-react-button video-react-menu-button'),\n        role: \"button\",\n        tabIndex: \"0\",\n        ref: function ref(c) {\n          _this3.menuButton = c;\n        },\n        onClick: this.handleClick,\n        onFocus: this.handleFocus,\n        onBlur: this.handleBlur\n      }, this.props.children, this.renderMenu());\n    }\n  }]);\n  return MenuButton;\n}(_react.Component);\n\nexports[\"default\"] = MenuButton;\nMenuButton.propTypes = propTypes;\nMenuButton.displayName = 'MenuButton';"]},"metadata":{},"sourceType":"script"}