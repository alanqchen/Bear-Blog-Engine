{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _MenuButton = _interopRequireDefault(require(\"../menu/MenuButton\"));\n\nvar propTypes = {\n  player: _propTypes[\"default\"].object,\n  actions: _propTypes[\"default\"].object,\n  className: _propTypes[\"default\"].string,\n  offMenuText: _propTypes[\"default\"].string,\n  showOffMenu: _propTypes[\"default\"].bool,\n  kinds: _propTypes[\"default\"].array\n};\nvar defaultProps = {\n  offMenuText: 'Off',\n  showOffMenu: true,\n  kinds: ['captions', 'subtitles'] // `kind`s of TextTrack to look for to associate it with this menu.\n\n};\n\nvar ClosedCaptionButton =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(ClosedCaptionButton, _Component);\n\n  function ClosedCaptionButton(props, context) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, ClosedCaptionButton);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(ClosedCaptionButton).call(this, props, context));\n    _this.getTextTrackItems = _this.getTextTrackItems.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.updateState = _this.updateState.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleSelectItem = _this.handleSelectItem.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.state = _this.getTextTrackItems();\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(ClosedCaptionButton, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.updateState();\n    }\n  }, {\n    key: \"getTextTrackItems\",\n    value: function getTextTrackItems() {\n      var _this$props = this.props,\n          kinds = _this$props.kinds,\n          player = _this$props.player,\n          offMenuText = _this$props.offMenuText,\n          showOffMenu = _this$props.showOffMenu;\n      var textTracks = player.textTracks,\n          activeTextTrack = player.activeTextTrack;\n      var textTrackItems = {\n        items: [],\n        selectedIndex: 0\n      };\n      var tracks = Array.from(textTracks || []);\n\n      if (tracks.length === 0) {\n        return textTrackItems;\n      }\n\n      if (showOffMenu) {\n        textTrackItems.items.push({\n          label: offMenuText || 'Off',\n          value: null\n        });\n      }\n\n      tracks.forEach(function (textTrack) {\n        // ignore invalid text track kind\n        if (kinds.length && !kinds.includes(textTrack.kind)) {\n          return;\n        }\n\n        textTrackItems.items.push({\n          label: textTrack.label,\n          value: textTrack.language\n        });\n      });\n      textTrackItems.selectedIndex = textTrackItems.items.findIndex(function (item) {\n        return activeTextTrack && activeTextTrack.language === item.value;\n      });\n\n      if (textTrackItems.selectedIndex === -1) {\n        textTrackItems.selectedIndex = 0;\n      }\n\n      return textTrackItems;\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState() {\n      var textTrackItems = this.getTextTrackItems();\n\n      if (textTrackItems.selectedIndex !== this.state.selectedIndex || !this.textTrackItemsAreEqual(textTrackItems.items, this.state.items)) {\n        this.setState(textTrackItems);\n      }\n    }\n  }, {\n    key: \"textTrackItemsAreEqual\",\n    value: function textTrackItemsAreEqual(items1, items2) {\n      if (items1.length !== items2.length) {\n        return false;\n      }\n\n      for (var i = 0; i < items1.length; i++) {\n        if (!items2[i] || items1[i].label !== items2[i].label || items1[i].value !== items2[i].value) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"handleSelectItem\",\n    value: function handleSelectItem(index) {\n      var _this$props2 = this.props,\n          player = _this$props2.player,\n          actions = _this$props2.actions,\n          showOffMenu = _this$props2.showOffMenu;\n      var textTracks = player.textTracks; // For the 'subtitles-off' button, the first condition will never match\n      // so all subtitles will be turned off\n\n      Array.from(textTracks).forEach(function (textTrack, i) {\n        // if it shows the `Off` menu, the first item is `Off`\n        if (index === (showOffMenu ? i + 1 : i)) {\n          textTrack.mode = 'showing';\n          actions.activateTextTrack(textTrack);\n        } else {\n          textTrack.mode = 'hidden';\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          items = _this$state.items,\n          selectedIndex = _this$state.selectedIndex;\n      return _react[\"default\"].createElement(_MenuButton[\"default\"], {\n        className: (0, _classnames[\"default\"])('video-react-closed-caption', this.props.className),\n        onSelectItem: this.handleSelectItem,\n        items: items,\n        selectedIndex: selectedIndex\n      }, _react[\"default\"].createElement(\"span\", {\n        className: \"video-react-control-text\"\n      }, \"Closed Caption\"));\n    }\n  }]);\n  return ClosedCaptionButton;\n}(_react.Component);\n\nClosedCaptionButton.propTypes = propTypes;\nClosedCaptionButton.defaultProps = defaultProps;\nClosedCaptionButton.displayName = 'ClosedCaptionButton';\nvar _default = ClosedCaptionButton;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/aqchen/go/src/github.com/alanqchen/Bear-Post/frontend/node_modules/video-react/lib/components/control-bar/ClosedCaptionButton.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_assertThisInitialized2","_inherits2","_propTypes","_react","_classnames","_MenuButton","propTypes","player","object","actions","className","string","offMenuText","showOffMenu","bool","kinds","array","defaultProps","ClosedCaptionButton","_Component","props","context","_this","call","getTextTrackItems","bind","updateState","handleSelectItem","state","key","componentDidUpdate","_this$props","textTracks","activeTextTrack","textTrackItems","items","selectedIndex","tracks","Array","from","length","push","label","forEach","textTrack","includes","kind","language","findIndex","item","textTrackItemsAreEqual","setState","items1","items2","i","index","_this$props2","mode","activateTextTrack","render","_this$state","createElement","onSelectItem","Component","displayName","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _MenuButton = _interopRequireDefault(require(\"../menu/MenuButton\"));\n\nvar propTypes = {\n  player: _propTypes[\"default\"].object,\n  actions: _propTypes[\"default\"].object,\n  className: _propTypes[\"default\"].string,\n  offMenuText: _propTypes[\"default\"].string,\n  showOffMenu: _propTypes[\"default\"].bool,\n  kinds: _propTypes[\"default\"].array\n};\nvar defaultProps = {\n  offMenuText: 'Off',\n  showOffMenu: true,\n  kinds: ['captions', 'subtitles'] // `kind`s of TextTrack to look for to associate it with this menu.\n\n};\n\nvar ClosedCaptionButton =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(ClosedCaptionButton, _Component);\n\n  function ClosedCaptionButton(props, context) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, ClosedCaptionButton);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(ClosedCaptionButton).call(this, props, context));\n    _this.getTextTrackItems = _this.getTextTrackItems.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.updateState = _this.updateState.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.handleSelectItem = _this.handleSelectItem.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.state = _this.getTextTrackItems();\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(ClosedCaptionButton, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.updateState();\n    }\n  }, {\n    key: \"getTextTrackItems\",\n    value: function getTextTrackItems() {\n      var _this$props = this.props,\n          kinds = _this$props.kinds,\n          player = _this$props.player,\n          offMenuText = _this$props.offMenuText,\n          showOffMenu = _this$props.showOffMenu;\n      var textTracks = player.textTracks,\n          activeTextTrack = player.activeTextTrack;\n      var textTrackItems = {\n        items: [],\n        selectedIndex: 0\n      };\n      var tracks = Array.from(textTracks || []);\n\n      if (tracks.length === 0) {\n        return textTrackItems;\n      }\n\n      if (showOffMenu) {\n        textTrackItems.items.push({\n          label: offMenuText || 'Off',\n          value: null\n        });\n      }\n\n      tracks.forEach(function (textTrack) {\n        // ignore invalid text track kind\n        if (kinds.length && !kinds.includes(textTrack.kind)) {\n          return;\n        }\n\n        textTrackItems.items.push({\n          label: textTrack.label,\n          value: textTrack.language\n        });\n      });\n      textTrackItems.selectedIndex = textTrackItems.items.findIndex(function (item) {\n        return activeTextTrack && activeTextTrack.language === item.value;\n      });\n\n      if (textTrackItems.selectedIndex === -1) {\n        textTrackItems.selectedIndex = 0;\n      }\n\n      return textTrackItems;\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState() {\n      var textTrackItems = this.getTextTrackItems();\n\n      if (textTrackItems.selectedIndex !== this.state.selectedIndex || !this.textTrackItemsAreEqual(textTrackItems.items, this.state.items)) {\n        this.setState(textTrackItems);\n      }\n    }\n  }, {\n    key: \"textTrackItemsAreEqual\",\n    value: function textTrackItemsAreEqual(items1, items2) {\n      if (items1.length !== items2.length) {\n        return false;\n      }\n\n      for (var i = 0; i < items1.length; i++) {\n        if (!items2[i] || items1[i].label !== items2[i].label || items1[i].value !== items2[i].value) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"handleSelectItem\",\n    value: function handleSelectItem(index) {\n      var _this$props2 = this.props,\n          player = _this$props2.player,\n          actions = _this$props2.actions,\n          showOffMenu = _this$props2.showOffMenu;\n      var textTracks = player.textTracks; // For the 'subtitles-off' button, the first condition will never match\n      // so all subtitles will be turned off\n\n      Array.from(textTracks).forEach(function (textTrack, i) {\n        // if it shows the `Off` menu, the first item is `Off`\n        if (index === (showOffMenu ? i + 1 : i)) {\n          textTrack.mode = 'showing';\n          actions.activateTextTrack(textTrack);\n        } else {\n          textTrack.mode = 'hidden';\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          items = _this$state.items,\n          selectedIndex = _this$state.selectedIndex;\n      return _react[\"default\"].createElement(_MenuButton[\"default\"], {\n        className: (0, _classnames[\"default\"])('video-react-closed-caption', this.props.className),\n        onSelectItem: this.handleSelectItem,\n        items: items,\n        selectedIndex: selectedIndex\n      }, _react[\"default\"].createElement(\"span\", {\n        className: \"video-react-control-text\"\n      }, \"Closed Caption\"));\n    }\n  }]);\n  return ClosedCaptionButton;\n}(_react.Component);\n\nClosedCaptionButton.propTypes = propTypes;\nClosedCaptionButton.defaultProps = defaultProps;\nClosedCaptionButton.displayName = 'ClosedCaptionButton';\nvar _default = ClosedCaptionButton;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}